<!doctype html>
<html>
<head>
    <title>Trust Game</title>
   <style>
        #student{
            display: none;
        }
        #teacher,#student,#enterNickname,#yourRoomCode{
            display: none;
        }
        #enterNickname{
            display:none;
        }
        h1{
            font-family: 'Poppins', sans-serif;
        }
        body{
            text-align: center;
        }
        #menu input, button{
          font-family: 'Poppins', sans-serif;
          height:100px;
          width: 350px;
          background-color: #4CAF50; /* Green */
          border: none;
          color: white;
          padding: 15px 32px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 26px;
          margin: 4px 2px;
          cursor: pointer;
        }
        #student input{
            height:50px;
            width:250px;
            font-size: 20px;
            margin: 100px;
            font-family: 'Poppins', sans-serif;

        }
    
    </style>
    <script>
        var set = new Set();
        function student(){
            
            document.getElementById("student").style.display = 'block';
            document.getElementById("menu").style.display = 'none';
            
        }
        function teacher(){
            
            document.getElementById("teacher").style.display = 'block';
            document.getElementById("menu").style.display = 'none';
            
            
        }
        
        function gen(){
        //generate random number later
          document.getElementById("yourRoomCode").style.display = 'block';
          document.getElementById("code").innerHTML = 100000;
        }
        
        function checkRoomCodes(){
            var val = document.getElementById("studentRoomCode").value;
            if(set.has(val)){
                document.getElementById("student").style.display = 'none';
                document.getElementById("enterNickname").style.display = 'block';
            }else{
                alert("Room Not Found! :(")
            }
            
        }
        
        function submitNickname(){
          //todo
        }
        
        
    </script>
</head>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>

    <script>
    $(function () {
        var socket = io();
        $("#theForm").submit(function(e){
          e.preventDefault(); // prevents page reloading
          socket.emit('message', $("#code").text());
          return false;
        });
      
        
     socket.on('message', function(msg){
         set.add(msg);
         alert(msg);
        });
     });   
        
   
    </script>
    
    
    
    <body>
    <div id = "menu">
    <h1>I am a...</h1>
    <input type="button" id="studentbutton" value="Student" onclick = "student()">
    <input type="button" id="teacherbutton" value="Teacher" onclick = "teacher()"> 
    </div>
    
    <div id="student">
        <input type= "text" id="studentRoomCode">
        <br>
        <button onclick="checkRoomCodes()">Submit Room Code</button>
    </div>
    
    
    
    <div id="teacher">
       <form id="theForm">
        <button onclick="gen()">Send</button>
       </form>
         <h1 id="yourRoomCode">Your Room Code</h1>
        <h1 id="code"></h1>	
    </div>
        
        
    <div id="enterNickname">
        <input type= "text" id="studentNick">
        <input type="button" value="submit nickname" onclick="submitNickname()">
    </div>
</body>
</html>
